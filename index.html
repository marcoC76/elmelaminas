<!DOCTYPE html>
<html lang="es" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>El Melaminas | Catálogo Premium 2026</title>
    <meta name="description"
        content="Catálogo digital de texturas y melaminas premium. Maderas, piedras y unicolores para arquitectura y diseño de interiores. Envíos a todo México.">
    <meta property="og:title" content="El Melaminas | Catálogo Premium">
    <meta property="og:description" content="Descubre nuestra colección exclusiva de texturas para tus proyectos.">
    <meta property="og:image"
        content="https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80">
    <meta property="og:type" content="website">

    <!-- JSON-LD Structured Data (SEO Improvement 4) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "El Melaminas",
      "image": "https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "C. 2 123-C, Granjas San Antonio",
        "addressLocality": "Iztapalapa",
        "addressRegion": "CDMX",
        "postalCode": "09070",
        "addressCountry": "MX"
      },
      "telephone": "+525551597562",
      "url": "https://elmelaminas.com",
      "priceRange": "$$",
      "description": "Tableros de melamina premium y texturas para arquitectura y diseño."
    }
    </script>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Playfair+Display:wght@400;600;700&display=swap"
        rel="stylesheet">
    <!-- Google Material Symbols -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <!-- Icons (Keeping Phosphor for Brand Logos which Google lacks) -->

    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        /* --- VARIABLES --- */
        :root {
            --primary: #8C7040;
            /* Gold/Brown from image */
            --primary-light: #f4efe6;
            --text-dark: #1a1a1a;
            --text-grey: #666;
            --bg-body: #fafafa;
            --bg-card: #ffffff;
            --radius-lg: 24px;
            --radius-md: 12px;
            --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.05);
            --shadow-card: 0 8px 30px rgba(0, 0, 0, 0.08);
            --nav-height: 70px;
        }

        [data-theme="dark"] {
            --primary: #d4b475;
            --primary-light: #2c251a;
            --text-dark: #f0f0f0;
            --text-grey: #aaa;
            --bg-body: #121212;
            --bg-card: #1e1e1e;
            --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-dark);
            padding-bottom: 90px;
            /* Space for bottom nav */
            overflow-x: hidden;
        }

        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            background: var(--bg-body);
        }

        h1,
        h2 {
            margin: 0;
        }

        h3 {
            font-family: 'Playfair Display', serif;
        }

        img {
            display: block;
            max-width: 100%;
            object-fit: cover;
        }

        button {
            border: none;
            background: none;
            cursor: pointer;
            font-family: inherit;
        }

        a {
            text-decoration: none;
        }

        /* --- LAYOUT UTILS --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .flex-between {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .grid-pro {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }

        /* --- HEADER & TOP BAR --- */
        .top-bar {
            padding: 20px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-dark);
            text-decoration: none;
        }

        .brand-logo {
            height: 45px;
            width: auto;
            border-radius: 8px;
            object-fit: contain;
        }

        .icon-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-card);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-dark);
            box-shadow: var(--shadow-soft);
            transition: 0.3s;
        }

        /* --- SEARCH --- */
        .search-wrapper {
            background: var(--bg-card);
            border-radius: 50px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: var(--shadow-soft);
            margin-bottom: 25px;
        }

        .search-wrapper input {
            border: none;
            outline: none;
            width: 100%;
            background: transparent;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            color: var(--text-dark);
        }

        /* --- HERO CARD (Image 2 Style) --- */
        .hero-card {
            height: 400px;
            border-radius: var(--radius-lg);
            overflow: hidden;
            position: relative;
            /* background-image removed for parallax */
            margin-bottom: 30px;
            box-shadow: var(--shadow-card);
            transform: translateZ(0);
            /* Fix for Safari border-radius clipping */
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 120%;
            /* Taller than container for movement */
            background-image: url('fotos/hero.jpg');
            background-size: cover;
            background-position: center;
            z-index: 1;
            will-change: transform;
        }

        .hero-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 30px;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            color: #ffffff;
            z-index: 2;
            /* Ensure on top of bg */
        }

        .hero-tag {
            font-size: 0.75rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #d4b475;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .hero-title {
            font-size: 2.2rem;
            line-height: 1.1;
            margin-bottom: 15px;
        }

        .btn-hero {
            background-color: var(--primary);
            color: #fff;
            padding: 10px 24px;
            border-radius: 30px;
            font-weight: 600;
            display: inline-block;
        }

        /* --- CATEGORY CHIPS (Image 2 Style) --- */
        .category-scroll {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 10px;
            margin-bottom: 25px;
            scrollbar-width: none;
            /* Hide scrollbar Firefox */
        }

        .category-scroll::-webkit-scrollbar {
            display: none;
        }

        .chip {
            flex-shrink: 0;
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--bg-card);
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 500;
            color: var(--text-grey);
            border: 1px solid transparent;
            box-shadow: var(--shadow-soft);
            transition: 0.3s;
        }

        .chip.active {
            background: var(--primary);
            color: #fff;
        }

        .chip i {
            font-size: 1.1rem;
        }

        /* --- PRODUCT GRID --- */
        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .prod-card {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-soft);
            position: relative;
        }

        .badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #fff;
            color: #000;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 4px;
            z-index: 2;
        }

        .prod-img {
            width: 100%;
            height: 180px;
            overflow: hidden;
            position: relative;
            background: var(--bg-body);
        }

        .prod-texture {
            width: 100%;
            height: 100%;
            transition: transform 0.5s ease;
        }

        .prod-card:hover .prod-texture {
            transform: scale(1.1);
        }

        .prod-real-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100% !important;
            height: 100% !important;
            min-width: 100% !important;
            min-height: 100% !important;
            max-width: none !important;
            object-fit: cover !important;
            object-position: center;
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 2;
        }

        .prod-real-img.loaded {
            opacity: 1;
        }

        /* Hide texture background when image is loaded to prevent bleeding */
        .prod-img:has(.prod-real-img.loaded) .prod-texture {
            opacity: 0;
        }

        .prod-info {
            padding: 12px;
        }

        .prod-name {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 4px;
        }

        .prod-detail {
            font-size: 0.75rem;
            color: var(--text-grey);
            margin-bottom: 12px;
        }

        .btn-sm {
            width: 100%;
            padding: 8px 0;
            border: 1px solid var(--text-grey);
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-dark);
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .btn-sm:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        /* --- BOTTOM NAV (Mobile) --- */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--bg-card);
            height: 70px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            z-index: 1000;
            padding-bottom: 10px;
            /* Safe area */
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.05);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.75rem;
            color: #999;
            gap: 4px;
            padding: 8px;
        }

        .nav-item i {
            font-size: 1.5rem;
        }

        .nav-item.active {
            color: var(--primary);
        }

        /* --- MODAL (Centered & Contained) --- */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            /* Center It */
            opacity: 0;
            padding: 20px;
            transition: opacity 0.3s;
            backdrop-filter: blur(5px);
        }

        .modal.open {
            display: flex;
            opacity: 1;
        }

        /* Reset transform for sheet content as we are now just fading/scaling the whole container */
        .modal.open .sheet-content {
            transform: none;
        }

        .sheet-container {
            width: 100%;
            max-width: 900px;
            height: 85vh;
            /* Fixed height for consistency */
            background: var(--bg-card);
            border-radius: 20px;
            overflow: hidden;
            /* Contain children */
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }

        .modal.open .sheet-container {
            transform: scale(1);
        }

        .sheet-img {
            height: 250px;
            /* Specific height for mobile */
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
            /* Texture bg set by JS */
        }

        .modal-real-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.5s;
            z-index: 1;
        }

        .sheet-img:has(.modal-real-img.loaded) {
            background: none !important;
        }

        .back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.9);
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            z-index: 10;
        }

        .actions-top {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .sheet-content {
            flex: 1;
            /* Take remaining space */
            background: var(--bg-card);
            padding: 30px;
            overflow-y: auto;
            /* Internal Scroll */
            margin: 0;
            border-radius: 0;
            transform: none !important;
            /* Override sheet slide */
        }

        .sheet-handle {
            display: none;
        }

        /* No handle needed */

        .spec-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 25px 0;
        }

        .spec-box {
            background: var(--bg-body);
            padding: 15px;
            border-radius: 12px;
        }

        .spec-label {
            font-size: 0.7rem;
            color: var(--text-grey);
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .spec-val {
            font-weight: 700;
            font-size: 1rem;
        }

        .tech-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .tech-icon {
            width: 40px;
            height: 40px;
            background: #fdf5e6;
            color: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .app-thumbnails {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .app-thumb {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
        }

        /* Fixed WhatsApp Button inside modal */
        .btn-whatsapp-sheet {
            background: #25D366;
            color: #fff;
            padding: 16px;
            border-radius: 12px;
            font-weight: 600;
            text-align: center;
            font-size: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 10px rgba(37, 211, 102, 0.2);
            margin-top: 25px;
            /* Spacing */
            transition: 0.3s;
        }

        .btn-whatsapp-sheet:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(37, 211, 102, 0.4);
        }

        /* TEXTURES */
        .wood-texture {
            background: repeating-linear-gradient(90deg, #e6c9a8 0px, #d4b48f 2px, #e6c9a8 5px, #cba479 10px);
        }

        .wood-dark {
            background: repeating-linear-gradient(90deg, #4a3b2a 0px, #3e3022 2px, #4a3b2a 6px);
        }

        .wood-red {
            background: repeating-linear-gradient(90deg, #8a5a44 0px, #754833 2px, #8a5a44 6px);
        }

        .wood-grey {
            background: repeating-linear-gradient(90deg, #a8a8a8 0px, #999 2px, #a8a8a8 6px);
        }

        .stone-texture {
            background: radial-gradient(circle, #f5f5f5 10%, transparent 10%), radial-gradient(circle, #e0e0e0 20%, transparent 20%);
            background-color: #ddd;
            background-size: 20px 20px;
        }

        .stone-dark {
            background-color: #333;
        }

        .solid-texture {
            background-color: #eee;
        }

        .textile-texture {
            background-color: #ccc;
        }

        /* --- NEW SECTIONS --- */
        .info-section {
            padding: 60px 0;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        .collapse-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            box-shadow: var(--shadow-soft);
            font-weight: 600;
        }

        .collapse-content {
            padding: 0 15px;
            max-height: 0;
            overflow: hidden;
            transition: 0.3s ease;
            color: var(--text-grey);
        }

        .collapse-content.open {
            padding: 15px;
            max-height: 200px;
        }

        .pro-banner {
            background: linear-gradient(45deg, #1a1a1a, #2c251a);
            color: #fff;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin: 40px 0;
        }

        /* Float WA */
        .wa-float {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: #25D366;
            color: white;
            border-radius: 50%;
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
            text-decoration: none;
            transition: 0.3s;
        }

        .wa-float:hover {
            transform: scale(1.1);
        }

        .wa-float img {
            width: 35px;
            height: 35px;
        }

        /* Use SVG for brand if needed */

        @media(min-width: 768px) {
            .wa-float {
                bottom: 30px;
            }
        }

        /* --- FOOTER (Restored) --- */
        footer {
            background-color: #121212;
            color: #999;
            padding: 60px 0 30px;
            margin-top: 60px;
            border-radius: 20px 20px 0 0;
            /* Modern touch */
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col h4 {
            color: #fff;
            margin-bottom: 20px;
            font-size: 1.1rem;
            letter-spacing: 1px;
        }

        .footer-col ul li {
            margin-bottom: 12px;
        }

        .footer-col ul li a {
            transition: 0.3s;
            display: inline-block;
        }

        .footer-col ul li a:hover {
            color: var(--primary);
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-btn {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            color: #fff;
            text-decoration: none;
            transition: 0.3s;
        }

        .social-btn:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        /* --- MICRO-INTERACTIONS --- */
        /* Scroll Animation */
        /* Scroll Animation */
        /* Scroll Animation - Handled by GSAP now */
        .reveal {
            /* opacity: 0; REMOVED to prevent invisible content if JS fails */
            /* transform: translateY(30px); REMOVED */
            /* transition: all 0.8s cubic-bezier(0.5, 0, 0, 1); REMOVED for GSAP control */
            visibility: hidden;
            /* Only hide initially, GSAP will handle autoAlpha */
        }

        /* Back to Top */
        .back-to-top {
            position: fixed;
            bottom: 90px;
            right: 20px;
            /* Aligned with WA but hidden */
            width: 45px;
            height: 45px;
            background: var(--bg-card);
            color: var(--text-dark);
            border-radius: 50%;
            box-shadow: var(--shadow-soft);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: 0.3s;
            z-index: 990;
            cursor: pointer;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
            bottom: 160px;
            /* Stack above WA */
        }

        @media(min-width: 768px) {
            .back-to-top.visible {
                bottom: 100px;
            }
        }

        /* Loader */
        .loader {
            border: 3px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* --- TRUST SECTIONS --- */
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .benefit-card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 16px;
            text-align: center;
            box-shadow: var(--shadow-soft);
            transition: 0.3s;
        }

        .benefit-card:hover {
            transform: translateY(-5px);
        }

        .benefit-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .testimonial-scroll {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding-bottom: 20px;
            margin-bottom: 40px;
            scrollbar-width: none;
        }

        .testimonial-scroll::-webkit-scrollbar {
            display: none;
        }

        .testi-card {
            min-width: 280px;
            background: var(--bg-card);
            padding: 25px;
            border-radius: 16px;
            box-shadow: var(--shadow-soft);
        }

        .stars {
            color: #f1c40f;
            margin-bottom: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ddd;
            margin-right: 10px;
        }

        /* --- CONTACT SECTION --- */
        .contact-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 60px;
        }

        .map-container {
            border-radius: 20px;
            overflow: hidden;
            height: 350px;
            box-shadow: var(--shadow-soft);
        }

        .map-container iframe {
            width: 100%;
            height: 100%;
            border: 0;
        }

        .contact-form {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--shadow-soft);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            background: var(--bg-body);
            font-family: 'Outfit', sans-serif;
            transition: 0.3s;
            box-sizing: border-box;
            /* Ensure padding doesn't affect width */
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(140, 112, 64, 0.1);
        }

        .form-btn {
            width: 100%;
            margin-top: 10px;
        }

        @media (min-width: 768px) {
            .contact-grid {
                grid-template-columns: 1fr 1fr;
            }


            /* .reveal.active removed - using GSAP */

            /* Heart Click Animation */
            @keyframes heartPulse {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.3);
                }

                100% {
                    transform: scale(1);
                }
            }

            .like-btn.liked {
                color: #e74c3c;
                animation: heartPulse 0.4s ease;
            }

            .like-btn.liked i {
                font-weight: bold;
            }

            /* Button Press Effect */
            .btn-press:active {
                transform: scale(0.95);
            }

            /* Chip Hover */
            .chip:hover {
                transform: translateY(-2px);
                box-shadow: var(--shadow-card);
            }

            @media (min-width: 768px) {
                .grid-pro {
                    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
                }

                .bottom-nav {
                    display: none;
                }

                body {
                    padding-bottom: 0;
                }

                /* Desktop Nav */
                .desktop-nav {
                    display: flex;
                    gap: 20px;
                }

                .desktop-nav a {
                    font-weight: 600;
                    color: var(--text-dark);
                }

                /* Modal Desktop Adjustment */
                .sheet-container {
                    flex-direction: row;
                    height: 550px;
                    /* Fixed elegant height */
                    max-height: 80vh;
                }

                .sheet-img {
                    width: 50%;
                    height: 100%;
                    border-right: 1px solid rgba(0, 0, 0, 0.05);
                }

                .sheet-content {
                    padding: 40px;
                }

                .btn-whatsapp-sheet {
                    margin-top: 30px;
                    bottom: auto;
                    left: auto;
                    right: auto;
                    position: static;
                    width: 100%;
                }
            }

            /* Keep close btn */
        }

        /* --- NEW SECTIONS (Improvement 5) --- */
        .trends-section {
            padding: 60px 0;
            background: var(--bg-body);
        }

        .trends-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .trend-card {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-soft);
            transition: 0.3s;
            border: 1px solid rgba(0, 0, 0, 0.03);
            cursor: pointer;
        }

        .trend-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-card);
        }

        .trend-img {
            height: 180px;
            background-size: cover;
            background-position: center;
        }

        .trend-content {
            padding: 20px;
        }

        .trend-date {
            font-size: 0.75rem;
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .newsletter-section {
            margin: 60px 0;
            padding: 60px 40px;
            background: linear-gradient(135deg, var(--primary), #5e4b3a);
            border-radius: var(--radius-lg);
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .newsletter-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
            opacity: 0.1;
        }

        .newsletter-content {
            position: relative;
            z-index: 2;
            max-width: 500px;
            margin: 0 auto;
        }

        .newsletter-input-group {
            display: flex;
            background: white;
            padding: 5px;
            border-radius: 50px;
            margin-top: 30px;
        }

        .newsletter-input {
            flex: 1;
            border: none;
            outline: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-family: inherit;
        }

        .btn-subscribe {
            background: var(--primary);
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: 600;
            transition: 0.3s;
        }

        .btn-subscribe:hover {
            background: #5e4b3a;
        }

        @media (max-width: 600px) {
            .newsletter-section {
                padding: 40px 20px;
            }

            .newsletter-input-group {
                flex-direction: column;
                background: transparent;
                gap: 10px;
            }

            .newsletter-input {
                background: white;
                border-radius: 50px;
                padding: 15px 20px;
            }
        }
    </style>
</head>

<body>

    <canvas id="bg-canvas"></canvas>

    <div class="container">
        <!-- HEADER -->
        <div class="top-bar">
            <div class="brand">
                <img src="elmelaminas.png" alt="El Melaminas Logo" class="brand-logo">
            </div>

            <nav class="desktop-nav" style="display: none;"> <!-- Visible on desktop via CSS -->
                <a href="#" class="active">Inicio</a>
                <a href="#catalogo">Catálogo</a>
                <a href="#contacto">Contacto</a>
            </nav>

            <div class="flex-between" style="gap: 15px;">
                <div class="social-links-nav" style="display: flex; gap: 10px;">
                    <a href="https://www.facebook.com/share/16wc5EqLiG/?mibextid=wwXIfr" target="_blank"
                        style="color: var(--text-dark);"><i class="ph ph-facebook-logo"></i></a>
                    <a href="https://www.instagram.com/el_melaminas?igsh=MTV0NzMxcGVhZ3JwOQ==" target="_blank"
                        style="color: var(--text-dark);"><i class="ph ph-instagram-logo"></i></a>
                    <a href="https://wa.me/525551597562" target="_blank" style="color: var(--text-dark);"><i
                            class="ph ph-whatsapp-logo"></i></a>
                    <a href="https://www.tiktok.com/@elmelaminas" target="_blank" style="color: var(--text-dark);"><i
                            class="ph ph-tiktok-logo"></i></a>
                </div>
                <button class="icon-btn" onclick="toggleTheme()" style="margin-left: 5px;">
                    <i id="themeIcon" class="ph ph-moon"></i>
                </button>
            </div>
        </div>

        <!-- SEARCH -->
        <div class="search-wrapper">
            <i class="ph ph-magnifying-glass" style="font-size: 1.2rem; color: var(--text-grey);"></i>
            <input type="text" id="searchInput" placeholder="Buscar texturas (Mocca, Olmo...)"
                onkeyup="searchProducts()">
        </div>

        <!-- HERO CARD -->
        <div class="hero-card">
            <div class="hero-bg" id="heroBg"></div>
            <div class="hero-overlay">
                <div class="hero-tag">COLECCIÓN 2026</div>
                <h2 class="hero-title serif-font" style="margin-top: 10px; margin-bottom: 20px;">Melamina para tus
                    muebles<br>al mejor precio del mercado</h2>
                <div
                    style="font-size: 1.2rem; margin-bottom: 25px; opacity: 0.9; line-height: 1.4; max-width: 500px; font-weight: 600; color: #d4b475;">
                    Precio de fabricante $600</div>
                <div class="btn-hero" onclick="document.getElementById('catalogo').scrollIntoView()">Ver Catálogo</div>
            </div>
        </div>

        <!-- CATEGORIES (Pills) -->
        <div
            style="margin-bottom: 10px; font-weight: 600; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;">
            Categorías Premium</div>
        <div class="category-scroll">
            <button class="chip active" onclick="filterProducts('all', this)">
                <i class="ph-fill ph-squares-four"></i> Todo
            </button>
            <button class="chip" onclick="filterProducts('maderas', this)">
                <i class="ph-fill ph-tree"></i> Maderas
            </button>
            <button class="chip" onclick="filterProducts('piedras', this)">
                <i class="ph-fill ph-hexagon"></i> Piedras
            </button>
            <button class="chip" onclick="filterProducts('unicolores', this)">
                <i class="ph-fill ph-palette"></i> Unicolores
            </button>
            <button class="chip" onclick="filterProducts('favs', this)" style="border: 1px solid var(--primary);">
                <i class="ph-fill ph-heart" style="color: #e74c3c;"></i> Favoritos
            </button>
        </div>

        <!-- PRODUCT GRID -->
        <div id="catalogo" style="padding-bottom: 30px;">
            <div class="flex-between" style="margin-bottom: 15px;">
                <h3 class="section-title">Destacados</h3>
                <span style="font-size: 0.8rem; color: var(--primary); font-weight: 600;">Ver todos</span>
            </div>

            <div class="grid-pro" id="productGrid">
                <!-- Injected via JS -->
            </div>
        </div>
    </div>

    <!-- WHY CHOOSE US -->
    <!-- Removed .reveal to prevent nested scroll trigger conflict -->
    <section class="container" style="margin-top: 40px;">
        <h3 class="section-title">¿Por qué elegirnos?</h3>
        <div class="benefits-grid">
            <div class="benefit-card">
                <span class="material-symbols-outlined benefit-icon">verified</span>
                <h4 style="margin-bottom: 8px;">Calidad Premium</h4>
                <p style="font-size: 0.9rem; color: var(--text-grey);">Materiales importados con certificaciones
                    internacionales.</p>
            </div>
            <div class="benefit-card">
                <span class="material-symbols-outlined benefit-icon">local_shipping</span>
                <h4 style="margin-bottom: 8px;">Envíos Seguros</h4>
                <p style="font-size: 0.9rem; color: var(--text-grey);">Protección total de tu carga hasta la entrega.
                </p>
            </div>
            <div class="benefit-card">
                <span class="material-symbols-outlined benefit-icon">support_agent</span>
                <h4 style="margin-bottom: 8px;">Asesoría Técnica</h4>
                <p style="font-size: 0.9rem; color: var(--text-grey);">Expertos disponibles para resolver tus dudas.</p>
            </div>
            <div class="benefit-card">
                <span class="material-symbols-outlined benefit-icon">inventory_2</span>
                <h4 style="margin-bottom: 8px;">Stock Garantizado</h4>
                <p style="font-size: 0.9rem; color: var(--text-grey);">Gran variedad de existencias para entrega
                    inmediata.</p>
            </div>
        </div>
    </section>

    <!-- TESTIMONIALS -->
    <section class="container reveal">
        <h3 class="section-title">Lo que dicen nuestros clientes</h3>
        <div class="testimonial-scroll">
            <div class="testi-card">
                <div class="stars">★★★★★</div>
                <p style="font-size: 0.9rem; color: var(--text-grey); margin-bottom: 15px;">"La calidad de la parota es
                    excepcional. Definitivamente volveré a comprar para mis próximos proyectos."</p>
                <div style="display:flex; align-items:center;">
                    <div class="user-avatar"
                        style="background-image: url('fotos/persona2.jpg'); background-size: cover;">
                    </div>
                    <div>
                        <div style="font-weight: 700; font-size: 0.9rem;">Carlos Ruiz</div>
                        <div style="font-size: 0.75rem; color: var(--text-grey);">Arquitecto</div>
                    </div>
                </div>
            </div>
            <div class="testi-card">
                <div class="stars">★★★★★</div>
                <p style="font-size: 0.9rem; color: var(--text-grey); margin-bottom: 15px;">"El servicio de entrega fue
                    rapidísimo y el material llegó en perfectas condiciones. ¡Muy recomendados!"</p>
                <div style="display:flex; align-items:center;">
                    <div class="user-avatar"
                        style="background-image: url('fotos/persona1.jpg'); background-size: cover;">
                    </div>
                    <div>
                        <div style="font-weight: 700; font-size: 0.9rem;">Ana Morales</div>
                        <div style="font-size: 0.75rem; color: var(--text-grey);">Diseñadora de Interiores</div>
                    </div>
                </div>
            </div>
            <div class="testi-card">
                <div class="stars">★★★★★</div>
                <p style="font-size: 0.9rem; color: var(--text-grey); margin-bottom: 15px;">"Variedad increíble de
                    texturas. Encontré justo el acabado piedra que mi cliente estaba buscando."</p>
                <div style="display:flex; align-items:center;">
                    <div class="user-avatar"
                        style="background-image: url('fotos/persona3.jpg'); background-size: cover;">
                    </div>
                    <div>
                        <div style="font-weight: 700; font-size: 0.9rem;">Roberto G.</div>
                        <div style="font-size: 0.75rem; color: var(--text-grey);">Contratista</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTIONS: PROFESSIONALS & INFO -->
    <section id="profesionales" class="container reveal">
        <div class="pro-banner">
            <span class="material-symbols-outlined"
                style="font-size: 3rem; margin-bottom: 10px; color: #d4b475;">architecture</span>
            <h2 style="margin-bottom: 10px;">Área de Profesionales</h2>
            <p style="max-width: 600px; margin: 0 auto 20px; opacity: 0.8;">Acceso exclusivo a texturas en alta
                resolución, archivos BIM/CAD y muestras físicas prioritarias.</p>
            <button class="btn-hero" style="background: #d4b475; color: #111;">Solicitar Acceso</button>
        </div>
    </section>

    <!-- TRENDS & BLOG (Improvement 5) -->
    <section class="trends-section reveal">
        <div class="container">
            <div class="flex-between">
                <h3 class="section-title">Tendencias 2026</h3>
                <span style="font-size: 0.8rem; color: var(--primary); font-weight: 600; cursor: pointer;">Leer
                    Blog</span>
            </div>
            <div class="trends-grid">
                <article class="trend-card" onclick="openBlogModal(0)">
                    <div class="trend-img" style="background-image: url('fotos/blog-1.jpg');">
                    </div>
                    <div class="trend-content">
                        <div class="trend-date">Enero 2026</div>
                        <h4 style="margin-bottom: 10px;">Madera y Minimalismo</h4>
                        <p style="font-size: 0.85rem; color: var(--text-grey);">Cómo los tonos claros de roble están
                            dominando los espacios abiertos...</p>
                    </div>
                </article>
                <article class="trend-card" onclick="openBlogModal(1)">
                    <div class="trend-img" style="background-image: url('fotos/blog-4.jpg');">
                    </div>
                    <div class="trend-content">
                        <div class="trend-date">Diciembre 2025</div>
                        <h4 style="margin-bottom: 10px;">Texturas de Piedra Natural</h4>
                        <p style="font-size: 0.85rem; color: var(--text-grey);">El regreso de los acabados marmolados en
                            cocinas de alto tráfico...</p>
                    </div>
                </article>
                <article class="trend-card" onclick="openBlogModal(2)">
                    <div class="trend-img" style="background-image: url('fotos/blog-3.jpg');">
                    </div>
                    <div class="trend-content">
                        <div class="trend-date">Noviembre 2025</div>
                        <h4 style="margin-bottom: 10px;">Nuevos Negros Matte</h4>
                        <p style="font-size: 0.85rem; color: var(--text-grey);">La elegancia atemporal del negro
                            profundo en
                            herrajes y cubiertas...</p>
                    </div>
                </article>
                <article class="trend-card" onclick="openBlogModal(3)">
                    <div class="trend-img" style="background-image: url('fotos/blog-2.jpg');">
                    </div>
                    <div class="trend-content">
                        <div class="trend-date">Octubre 2025</div>
                        <h4 style="margin-bottom: 10px;">Vetas Sincronizadas</h4>
                        <p style="font-size: 0.85rem; color: var(--text-grey);">La tecnología que permite sentir la
                            madera real al tacto en cada tablero...</p>
                    </div>
                </article>
                <article class="trend-card" onclick="openBlogModal(4)">
                    <div class="trend-img" style="background-image: url('fotos/blog-5.jpg');">
                    </div>
                    <div class="trend-content">
                        <div class="trend-date">Septiembre 2025</div>
                        <h4 style="margin-bottom: 10px;">Espacios Multifuncionales</h4>
                        <p style="font-size: 0.85rem; color: var(--text-grey);">Soluciones inteligentes de mobiliario
                            para hogares pequeños y oficinas...</p>
                    </div>
                </article>
                <article class="trend-card" onclick="openBlogModal(5)">
                    <div class="trend-img" style="background-image: url('fotos/blog-6.jpg');">
                    </div>
                    <div class="trend-content">
                        <div class="trend-date">Agosto 2025</div>
                        <h4 style="margin-bottom: 10px;">Sustentabilidad en el Diseño</h4>
                        <p style="font-size: 0.85rem; color: var(--text-grey);">Nuestra apuesta por procesos
                            eco-friendly y maderas certificadas...</p>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <section id="faq" class="container reveal" style="margin-bottom: 40px;">
        <div class="footer-grid" style="grid-template-columns: 1fr 1fr; gap: 40px;">
            <div>
                <h3 class="section-title"><span class="material-symbols-outlined"
                        style="vertical-align:middle; margin-right:8px; color:var(--primary);">help</span>Preguntas
                    Frecuentes</h3>

                <div class="collapse-title" onclick="toggleFaq(this)">
                    ¿Realizan envíos a todo México?
                    <span class="material-symbols-outlined">expand_more</span>
                </div>
                <div class="collapse-content">
                    Sí, contamos con red de distribución en todo el país. El tiempo de entrega varía según la zona,
                    generalmente de 3 a 5 días hábiles.
                </div>

                <div class="collapse-title" onclick="toggleFaq(this)">
                    ¿Venden a particulares?
                    <span class="material-symbols-outlined">expand_more</span>
                </div>
                <div class="collapse-content">
                    Principalmente atendemos a mayoristas y arquitectos, pero puedes contactarnos para dirigirte con
                    nuestro distribuidor más cercano.
                </div>
            </div>

            <div id="envios">
                <h3 class="section-title"><span class="material-symbols-outlined"
                        style="vertical-align:middle; margin-right:8px; color:var(--primary);">local_shipping</span>Política
                    de Envíos</h3>
                <div
                    style="background: var(--bg-card); padding: 25px; border-radius: 20px; box-shadow: var(--shadow-soft);">
                    <ul style="list-style: none; display: flex; flex-direction: column; gap: 15px;">
                        <li style="display:flex; gap:12px; align-items:center;">
                            <span class="material-symbols-outlined" style="color:green;">check_circle</span>
                            <span>Seguro de carga incluido en todos los pedidos.</span>
                        </li>
                        <li style="display:flex; gap:12px; align-items:center;">
                            <span class="material-symbols-outlined" style="color:var(--primary);">schedule</span>
                            <span>Entregas express en zona norte (24-48 hrs).</span>
                        </li>
                        <li style="display:flex; gap:12px; align-items:center;">
                            <span class="material-symbols-outlined" style="color:var(--text-grey);">package_2</span>
                            <span>Embalaje reforzado para evitar daños.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    </section>

    <!-- MAP SECTION -->
    <section id="ubicacion" class="container reveal">
        <h3 class="section-title">Visítanos</h3>
        <div class="map-container"
            style="width: 100%; height: 400px; border-radius: 20px; overflow: hidden; box-shadow: var(--shadow-soft);">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d115408.097637777!2d-99.09259837910156!3d19.380531500000002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d1fd0614838d17%3A0x62923da619c01792!2sIztapalapa%2C%20CDMX!5e0!3m2!1ses!2smx!4v1689623820000!5m2!1ses!2smx"
                style="border:0; width:100%; height:100%;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </section>

    <!-- FLOATING WHATSAPP -->
    <a href="https://wa.me/525551597562" target="_blank" class="wa-float" title="Contactar por WhatsApp">
        <i class="ph ph-whatsapp-logo" style="font-size: 2rem;"></i>
    </a>

    <!-- BACK TO TOP -->
    <div class="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        <span class="material-symbols-outlined">arrow_upward</span>
    </div>

    <!-- NEWSLETTER (Improvement 5) -->
    <section class="container reveal">
        <div class="newsletter-section">
            <div class="newsletter-content">
                <h3 style="font-size: 1.8rem; margin-bottom: 10px;">Únete al Círculo Exclusivo</h3>
                <p style="opacity: 0.9; font-size: 0.95rem;">Recibe antes que nadie las nuevas colecciones, tendencias
                    de diseño y ofertas especiales para profesionales.</p>
                <div class="newsletter-input-group">
                    <input type="email" class="newsletter-input" placeholder="tu@correo.com"
                        aria-label="Correo electrónico para newsletter">
                    <button class="btn-subscribe" onclick="alert('¡Gracias por suscribirte!')">Suscribirme</button>
                </div>
                <p style="margin-top: 15px; font-size: 0.75rem; opacity: 0.7;">No enviamos spam. Puedes cancelar cuando
                    quieras.</p>
            </div>
        </div>
    </section>

    <!-- FOOTER RESTORED -->
    <footer id="contacto" class="reveal">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="brand" style="margin-bottom: 1.5rem;">
                        <img src="elmelaminas.png" alt="El Melaminas Logo" class="brand-logo"
                            style="height: 60px; filter: brightness(1.1);">
                    </div>
                    <p>Expertos en soluciones para mobiliario desde 1996. Transformamos espacios con materiales de
                        vanguardia.</p>
                    <div class="social-links" style="display: none;">
                        <a href="https://www.facebook.com/share/16wc5EqLiG/?mibextid=wwXIfr" target="_blank"
                            class="social-btn"><i class="ph ph-facebook-logo"></i></a>
                        <a href="https://www.instagram.com/el_melaminas?igsh=MTV0NzMxcGVhZ3JwOQ==" target="_blank"
                            class="social-btn"><i class="ph ph-instagram-logo"></i></a>
                        <a href="#" class="social-btn"><i class="ph ph-whatsapp-logo"></i></a>
                        <a href="https://www.tiktok.com/@elmelaminas" target="_blank" class="social-btn"><i
                                class="ph ph-tiktok-logo"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Enlaces Rápidos</h4>
                    <ul>
                        <li><a href="#">Catálogo Completo</a></li>
                        <li><a href="#">Área de Profesionales</a></li>
                        <li><a href="#">Preguntas Frecuentes</a></li>
                        <li><a href="#">Política de Envíos</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contáctanos</h4>
                    <ul>
                        <li style="display:flex; gap:10px; align-items:center;"><span
                                class="material-symbols-outlined">location_on</span> C. 2 123-C, Granjas San Antonio,
                            Iztapalapa, 09070 CDMX</li>
                        <li style="display:flex; gap:10px; align-items:center;"><span
                                class="material-symbols-outlined">mail</span>
                            ventas@elmelaminas.com</li>
                        <li style="display:flex; gap:10px; align-items:center;"><span
                                class="material-symbols-outlined">call</span> 55-51-59-75-62</li>
                    </ul>
                </div>
            </div>
            <div
                style="text-align:center; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 2rem; font-size: 0.8rem;">
                &copy; <span id="year"></span> El Melaminas. Todos los derechos reservados.
            </div>
        </div>
    </footer>

    <!-- BOTTOM NAV (MOBILE) -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
            <span class="material-symbols-outlined">home</span>
            <span>Inicio</span>
        </div>
        <div class="nav-item" onclick="document.getElementById('catalogo').scrollIntoView({behavior: 'smooth'})">
            <span class="material-symbols-outlined">menu_book</span>
            <span>Catálogo</span>
        </div>
        <div class="nav-item" onclick="document.getElementById('ubicacion').scrollIntoView({behavior: 'smooth'})">
            <span class="material-symbols-outlined">location_on</span>
            <span>Ubicación</span>
        </div>
        <div class="nav-item" onclick="window.open('https://wa.me/525551597562', '_blank')">
            <i class="ph ph-whatsapp-logo" style="font-size: 1.5rem;"></i>
            <span>Contacto</span>
        </div>
    </div>

    <!-- MODAL (BOTTOM SHEET) -->
    <div id="productModal" class="modal">
        <div class="sheet-container">
            <div class="sheet-img" id="modalImg">
                <div class="back-btn" onclick="closeModal()">
                    <i class="ph-bold ph-arrow-left"></i>
                </div>
                <div class="actions-top">
                    <!-- Share and Like placeholders -->
                    <div class="back-btn like-btn" onclick="toggleLike(this)" style="position:static; cursor:pointer;">
                        <i class="ph-fill ph-heart"></i>
                    </div>
                    <div class="back-btn btn-press" onclick="shareProduct()" style="position:static; cursor:pointer;">
                        <i class="ph-bold ph-share-network"></i>
                    </div>
                </div>
            </div>

            <div class="sheet-content">
                <div class="sheet-handle"></div>

                <div style="text-align: center; margin-bottom: 20px;">
                    <span class="chip"
                        style="display:inline-flex; padding: 4px 12px; font-size: 0.7rem; margin-bottom: 10px; background: #f4efe6; color: var(--primary);">MADERAS
                        PRECIOSAS</span>
                    <h2 id="modalTitle" class="serif-font" style="font-size: 2rem; margin-bottom: 5px;">Parota Premium
                    </h2>
                    <p style="font-size: 0.9rem; color: var(--text-grey); font-style: italic;">Textura orgánica y tonos
                        cálidos que definen el lujo.</p>
                </div>

                <div class="spec-grid">
                    <div class="spec-box">
                        <div class="spec-label"><i class="ph-bold ph-ruler"></i> Dimensiones</div>
                        <div class="spec-val">1.22 x 2.44 m</div>
                    </div>
                    <div class="spec-box">
                        <div class="spec-label"><i class="ph-bold ph-layers"></i> Espesores</div>
                        <div class="spec-val">15mm / 18mm</div>
                    </div>
                </div>

                <div style="display:flex; align-items: center; gap: 10px; margin: 20px 0 10px;">
                    <div style="height: 1px; flex: 1; background: #eee;"></div>
                    <span style="font-size: 0.8rem; font-weight: 700; letter-spacing: 1px;">FICHA TÉCNICA</span>
                    <div style="height: 1px; flex: 1; background: #eee;"></div>
                </div>

                <div class="tech-item">
                    <div class="tech-icon"><i class="ph-fill ph-shield-check"></i></div>
                    <div>
                        <div style="font-weight: 600;">Protección Antibacterial</div>
                        <div style="font-size: 0.8rem; color: var(--text-grey);">Elimina el 99% de microorganismos.
                        </div>
                    </div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon"><i class="ph-fill ph-sparkle"></i></div>
                    <div>
                        <div style="font-weight: 600;">Resistencia al Rayado</div>
                        <div style="font-size: 0.8rem; color: var(--text-grey);">Ideal para uso rudo y residencial.
                        </div>
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <div style="font-weight: 700; font-size: 0.8rem; margin-bottom: 10px;">APLICACIONES SUGERIDAS</div>
                    <div class="app-thumbnails">
                        <img src="https://images.unsplash.com/photo-1556911220-e15b29be8c8f?w=150&h=150&fit=crop"
                            class="app-thumb">
                        <img src="https://images.unsplash.com/photo-1524758631624-e2822e304c36?w=150&h=150&fit=crop"
                            class="app-thumb">
                        <img src="https://images.unsplash.com/photo-1616486338812-3dadae4b4ace?w=150&h=150&fit=crop"
                            class="app-thumb">
                    </div>
                </div>

                <a href="#" id="modalWhatsapp" target="_blank" class="btn-whatsapp-sheet">
                    <i class="ph ph-whatsapp-logo" style="font-size: 1.4rem;"></i> Cotizar por WhatsApp
                </a>
            </div>
        </div>
    </div>

    <!-- BLOG MODAL -->
    <div id="blogModal" class="modal">
        <div class="sheet-container" style="max-width: 800px;">
            <div class="sheet-content" style="width: 100%; overflow-y: auto;">
                <div class="flex-between" style="margin-bottom: 20px;">
                    <div id="blogDate" class="trend-date"></div>
                    <i class="ph ph-x" onclick="closeBlogModal()" style="cursor:pointer; font-size: 1.5rem;"></i>
                </div>
                <h2 id="blogTitle" class="serif-font" style="font-size: 2.2rem; margin-bottom: 20px;"></h2>
                <div id="blogBody" style="line-height: 1.8; color: var(--text-grey);"></div>
                <button class="btn-hero" onclick="closeBlogModal()"
                    style="margin-top: 30px; width: 100%;">Cerrar</button>
            </div>
        </div>
    </div>

    <script>
        // DATA
        const products = [
            // List based on the user table
            { id: 1, name: "Mocca", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #6f5b48 0px, #5e4b3a 2px, #6f5b48 5px)", badge: "NUEVO", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "MOCCA.png" },
            { id: 2, name: "Olmo", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #eaddcf 0px, #dcc0aa 2px, #eaddcf 6px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "OLMO.png" },
            { id: 3, name: "Oporto", category: "maderas", style: "wood-red", color: "repeating-linear-gradient(90deg, #8a5a44 0px, #754833 2px, #8a5a44 6px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "OPORTO.png" },
            { id: 4, name: "Lombardía", category: "maderas", style: "wood-grey", color: "repeating-linear-gradient(90deg, #888 0px, #777 2px, #888 6px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "LOMBARDÍA.png" },
            { id: 5, name: "Anahuac", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #a67c52 0px, #8b6b4a 2px, #a67c52 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "ANAHUAC.jpg" },
            { id: 6, name: "Cemento", category: "piedras", style: "stone-texture", color: "#a5a9b0", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "CEMENTO.jpg" },
            { id: 7, name: "Blanco Frosty", category: "unicolores", style: "solid-texture", color: "#f7f7f7", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "BLANCO FROSTY.png" },
            { id: 8, name: "Mármol Negro", category: "piedras", style: "stone-dark", color: "#111", badge: "LUJO", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "MÁRMOL NEGRO.png" },
            { id: 9, name: "Mármol Blanco", category: "piedras", style: "stone-texture", color: "#fff", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "MÁRMOL BLANCO.png" },
            { id: 10, name: "Cedro", category: "maderas", style: "wood-red", color: "repeating-linear-gradient(90deg, #a0522d 0px, #8b4513 2px, #a0522d 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "CEDRO.png" },
            { id: 11, name: "Parota", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #5c4736 0px, #423126 2px, #5c4736 8px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "PAROTA.png" },
            { id: 12, name: "Moscato", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #d2b48c 0px, #cdaa7d 2px, #d2b48c 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "MOSCATO.png" },
            { id: 13, name: "Textil", category: "textiles", style: "textile-texture", color: "#dcdcdc", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "TEXTIL.jpg" },
            { id: 14, name: "Maranelo", category: "maderas", style: "wood-dark", color: "repeating-linear-gradient(90deg, #3d2b1f 0px, #2a1b0f 2px, #3d2b1f 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "MARANELO.jpg" },
            { id: 15, name: "Wengue Chocolate", category: "maderas", style: "wood-dark", color: "repeating-linear-gradient(90deg, #2b1d0e 0px, #1a0f00 2px, #2b1d0e 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "WENGUE CHOCOLATE.jpg" },
            { id: 16, name: "Linoza", category: "textiles", style: "textile-texture", color: "#e3e3e3", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "LINOZA.jpg" },
            { id: 17, name: "Nogal Africano", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #4b3621 0px, #3b2b1b 2px, #4b3621 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "NOGAL AFRICANO.jpg" },
            { id: 18, name: "Avellana", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #8b5a2b 0px, #7a4a1b 2px, #8b5a2b 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "AVELLANA.png" },
            { id: 19, name: "Ébano (Negro)", category: "maderas", style: "wood-dark", color: "repeating-linear-gradient(90deg, #1a1a1a 0px, #0d0d0d 2px, #1a1a1a 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "ÉBANO.png" },
            { id: 20, name: "Ébano (Gris)", category: "maderas", style: "wood-grey", color: "repeating-linear-gradient(90deg, #4a4a4a 0px, #3a3a3a 2px, #4a4a4a 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "ÉBANO.png" },
            { id: 21, name: "Blanco Absoluto", category: "unicolores", style: "solid-texture", color: "#fff", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "BLANCO ABSOLUTO.png" },
            { id: 22, name: "Riviera", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #c4a484 0px, #b39373 2px, #c4a484 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "RIVIERA.png" },
            { id: 23, name: "Fresno Bruma", category: "maderas", style: "wood-grey", color: "repeating-linear-gradient(90deg, #d3d3d3 0px, #c0c0c0 2px, #d3d3d3 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "FRESNO BRUMA.png" },
            { id: 24, name: "Ártico", category: "unicolores", style: "solid-texture", color: "#e0f2f1", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "ÁRTICO.jpg" },
            { id: 25, name: "Malta", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #deb887 0px, #cd9b6e 2px, #deb887 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "MALTA.png" },
            { id: 26, name: "Tzlam", category: "maderas", style: "wood-red", color: "repeating-linear-gradient(90deg, #8b4513 0px, #703a0a 2px, #8b4513 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "TZLAM.png" },
            { id: 27, name: "Tabaco", category: "maderas", style: "wood-dark", color: "repeating-linear-gradient(90deg, #3d2b1f 0px, #2a1b0f 2px, #3d2b1f 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "TABACO.png" },
            { id: 28, name: "Monarca", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #a0522d 0px, #8b4513 2px, #a0522d 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "MONARCA.png" },
            { id: 29, name: "Encino Polar", category: "maderas", style: "wood-grey", color: "repeating-linear-gradient(90deg, #f5f5f5 0px, #e8e8e8 2px, #f5f5f5 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "ENCINO POLAR.png" },
            { id: 30, name: "Nogal Tenue", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #bc8f8f 0px, #a67d7d 2px, #bc8f8f 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "NOGAL TENUE.png" },
            { id: 31, name: "Toscana", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #d2b48c 0px, #cdaa7d 2px, #d2b48c 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "TOSCANA.png" },
            { id: 32, name: "Roble Santana", category: "maderas", style: "wood-texture", color: "repeating-linear-gradient(90deg, #f4a460 0px, #e39350 2px, #f4a460 5px)", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "ROBLE SANTANA.png" },
            { id: 33, name: "Gris Claro", category: "unicolores", style: "solid-texture", color: "#d3d3d3", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "GRIS CLARO.png" },
            { id: 34, name: "Gris Oxford", category: "unicolores", style: "solid-texture", color: "#4b4b4b", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "GRIS OXFORD.png" },
            { id: 35, name: "Negro", category: "unicolores", style: "solid-texture", color: "#000", format: "1.22 x 2.44 m", thickness: "15 mm", faces: "2 caras", safety: "Libre de formaldehído y tóxicos", image: "NEGRO.png" }
        ];

        const blogArticles = [
            {
                title: "Madera y Minimalismo: El Renacimiento del Roble",
                date: "Enero 2026",
                body: `<p>El diseño de interiores para el 2026 marca una clara tendencia hacia la honestidad de los materiales. La melamina con veta de roble claro se ha convertido en la protagonista indiscutible de los hogares modernos, buscando una conexión más profunda con la naturaleza sin sacrificar la practicidad.</p>
                       <p>Esta tendencia, a menudo denominada "Japandi Moderno", busca maximizar la luz natural combinando mobiliario en tonos miel con paredes blancas hueso y texturas orgánicas como el lino y la piedra. La clave del éxito en estos proyectos reside en la textura "Sincronizada" de nuestros tableros, que permite sentir el relieve de la madera real al tacto, elevando la percepción de calidad y lujo en cualquier espacio residencial.</p>
                       <p><strong>Consejo de diseño:</strong> Utilice grandes formatos de tablero para minimizar las juntas y crear una sensación de continuidad visual que amplíe los espacios pequeños.</p>`
            },
            {
                title: "Piedra Natural: Elegancia Industrial y Sofisticada",
                date: "Diciembre 2025",
                body: `<p>Las cubiertas que imitan el mármol, el granito y la piedra volcánica están redefiniendo las cocinas mexicanas de alta gama. El contraste entre materiales visualmente fríos como la piedra y elementos cálidos como la iluminación LED indirecta crea un ambiente de hotel boutique directamente en tu hogar.</p>
                       <p>Nuestras melaminas de la colección 'Piedras' ofrecen esta estética de alto impacto visual con la ventaja técnica de una durabilidad superior: son resistentes a las manchas, fáciles de desinfectar y requieren cero mantenimiento comparado con la piedra natural porosa. Son ideales para familias activas que no quieren renunciar al estilo.</p>
                       <p>Para el 2026, veremos una integración total de estas texturas no solo en cocinas, sino también en revestimientos de muros de salas y chimeneas modernas.</p>`
            },
            {
                title: "La Magia del Negro Matte: Profundidad y Carácter",
                date: "Noviembre 2025",
                body: `<p>El negro ya no es simplemente un color de acento; se ha consolidado como una elección de estilo completa y audaz. El acabado 'Matte' absoluto de nuestra línea de unicolores elimina los reflejos innecesarios y las molestas huellas dactilares, permitiendo que la forma pura del mueble sea la que hable por sí misma.</p>
                       <p>Este acabado es especialmente popular en oficinas de diseño, estudios creativos y cocinas abiertas donde la sobriedad es sinónimo de profesionalismo y elegancia. Al combinarlo con maderas claras o detalles en metal dorado, se logra un equilibrio perfecto entre lo moderno y lo clásico.</p>
                       <p><strong>Especificación Técnica:</strong> Nuestra tecnología anti-huella asegura que la superficie mantenga su aspecto aterciopelado incluso con el uso diario intenso.</p>`
            },
            {
                title: "Vetas Sincronizadas: El Tacto de lo Real en cada Detalle",
                date: "Octubre 2025",
                body: `<p>La tecnología de poro sincronizado ha marcado un antes y un después en la industria de la melamina a nivel global. Al hacer coincidir matemáticamente la textura táctil con el dibujo visual de la veta impresa, logramos un material que es prácticamente indistinguible de la madera natural, incluso para el ojo experto.</p>
                       <p>Esta colección es la respuesta perfecta para arquitectos y diseñadores que buscan la calidez y el prestigio de la madera sólida pero necesitan la consistencia, resistencia y facilidad de transformación que solo un tablero industrial de alta densidad puede ofrecer.</p>
                       <p>Desde muebles de baño hasta revestimientos comerciales de alto tráfico, las vetas sincronizadas ofrecen una solución estética sin precedentes con un costo-beneficio inigualable.</p>`
            },
            {
                title: "Espacios Multifuncionales: Adaptabilidad para la Vida Moderna",
                date: "Septiembre 2025",
                body: `<p>El hogar actual ha evolucionado y ya no permite habitaciones con un solo propósito. La cocina hoy es oficina, el dormitorio es estudio y la sala es zona de juegos. El diseño de mobiliario inteligente se adapta a esta realidad con piezas versátiles, modulares y estéticamente neutras que no sobrecargan el ambiente.</p>
                       <p>En este contexto, nuestras colecciones de unicolores y textiles (como el Lino Grafito) ofrecen la base neutra ideal para crear estos espacios armónicos. La clave es el equilibrio: mobiliario funcional que parece decoración cuando no está en uso.</p>
                       <p>Aprovechar cada centímetro cuadrado con diseños a medida elaborados con materiales de alta calidad es la mejor inversión para mejorar la calidad de vida urbana.</p>`
            },
            {
                title: "Compromiso con la Sustentabilidad: Diseño con Conciencia",
                date: "Agosto 2025",
                body: `<p>En El Melaminas, entendemos profundamente que el futuro del diseño debe ser sustentable o no será. Nuestro compromiso no es solo una palabra; trabajamos exclusivamente con proveedores globales que cuentan con las más estrictas certificaciones de manejo forestal responsable y economía circular.</p>
                       <p>Nuestros procesos de logística y distribución están optimizados para reducir la huella de carbono, y nos aseguramos de que cada tablero que llega a tus manos sea el resultado de una cadena de valor ética, transparente y consciente del medio ambiente.</p>
                       <p>Al elegir nuestros materiales, no solo estás eligiendo belleza y durabilidad, sino que también estás apoyando una industria que protege los recursos para las generaciones venideras.</p>`
            }
        ];

        // FAVORITES LOGIC
        let favorites = JSON.parse(localStorage.getItem('melaminas_favs')) || [];

        function toggleFavorite(productId, btn) {
            const index = favorites.indexOf(productId);
            if (index > -1) {
                favorites.splice(index, 1);
                btn.classList.remove('liked');
            } else {
                favorites.push(productId);
                btn.classList.add('liked');
            }
            localStorage.setItem('melaminas_favs', JSON.stringify(favorites));
        }

        // GSAP ANIMATIONS & INIT
        function initGSAP() {
            gsap.registerPlugin(ScrollTrigger);

            // 1. Hero Animation (Entrance)
            // 1. Hero Animation (Entrance) - Use autoAlpha for visibility safety
            const tl = gsap.timeline();
            tl.fromTo('.hero-overlay', { autoAlpha: 0, y: 50 }, { duration: 1.2, autoAlpha: 1, y: 0, ease: 'power4.out' })
                .fromTo('.hero-tag', { autoAlpha: 0, x: -20 }, { duration: 0.8, autoAlpha: 1, x: 0, ease: 'power2.out' }, '-=0.7')
                .fromTo('.hero-title', { autoAlpha: 0, y: 20 }, { duration: 0.8, autoAlpha: 1, y: 0, ease: 'power2.out' }, '-=0.6')
                .fromTo('.chip', { autoAlpha: 0, y: 20 }, { duration: 0.6, autoAlpha: 1, y: 0, stagger: 0.1, ease: 'back.out(1.7)' }, '-=0.5');

            // 2. Scroll Animations (Sections) - Robust AutoAlpha
            const sections = gsap.utils.toArray('.reveal');
            sections.forEach(section => {
                gsap.fromTo(section,
                    { autoAlpha: 0, y: 50 }, // Start state
                    {
                        scrollTrigger: {
                            trigger: section,
                            start: 'top 90%', // Refined for earlier activation
                            toggleActions: 'play none none reverse',
                            // markers: true, // DEBUG
                        },
                        autoAlpha: 1, // Ensures visibility even if opacity was 0
                        y: 0,
                        duration: 1,
                        ease: 'power3.out'
                    }
                );
            });

            // 3. Stagger for "Why Choose Us"
            // Ensure container is visible before staggering children
            gsap.set('.benefits-grid', { autoAlpha: 1 });

            gsap.fromTo('.benefit-card',
                { autoAlpha: 0, y: 30 },
                {
                    scrollTrigger: {
                        trigger: '.benefits-grid',
                        start: 'top 90%', // Refined for earlier activation
                    },
                    autoAlpha: 1,
                    y: 0,
                    duration: 0.8,
                    stagger: 0.2,
                    ease: 'power2.out'
                }
            );
        }

        // MICRO-INTERACTIONS
        function toggleLike(btn) {
            const productId = btn.dataset.productId;
            if (productId) {
                toggleFavorite(parseInt(productId), btn);
            } else {
                btn.classList.toggle('liked');
            }
        }

        // RENDER PRODUCTS
        function renderProducts(filter = 'all', searchTerm = '') {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';

            const filtered = products.filter(p => {
                // Handle Favorites filter specifically
                const matchCat = filter === 'all' ||
                    (filter === 'favs' ? favorites.includes(p.id) : p.category === filter);

                // Smart Search: matches name or category
                const term = searchTerm.toLowerCase();
                const matchSearch = p.name.toLowerCase().includes(term) ||
                    p.category.toLowerCase().includes(term);

                return matchCat && matchSearch;
            });

            filtered.forEach(p => {
                const card = document.createElement('div');
                card.className = 'prod-card reveal';
                card.onclick = () => openModal(p);

                const isLiked = favorites.includes(p.id) ? 'liked' : '';
                let bgStyle = `background: ${p.color}`;

                const badgeHtml = p.badge ? `<div class="badge">${p.badge}</div>` : '';

                card.innerHTML = `
                    ${badgeHtml}
                    <div class="prod-img">
                        <img src="fotos/${p.image}" class="prod-real-img" alt="${p.name}" onload="this.classList.add('loaded')" onerror="this.style.display='none'">
                        <div class="prod-texture ${p.style}" style="${bgStyle}"></div>
                    </div>
                    <div class="prod-info">
                        <div class="flex-between" style="margin-bottom: 5px;">
                            <div class="prod-name">${p.name}</div>
                            <i class="ph-fill ph-heart like-btn ${isLiked}" 
                               onclick="event.stopPropagation(); toggleFavorite(${p.id}, this)" 
                               style="cursor:pointer; font-size: 1.2rem;"></i>
                        </div>
                        <div class="prod-detail">Veta natural • Sincronizada</div>
                        <button class="btn-sm">
                            <span class="material-symbols-outlined" style="font-size:1rem;">visibility</span> Ver Detalles
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });

            // Animate only the new cards with GSAP Batch/Stagger
            // Use fromTo to ensure visibility is reset
            gsap.fromTo('.prod-card',
                { autoAlpha: 0, y: 30 },
                {
                    autoAlpha: 1,
                    y: 0,
                    duration: 0.5,
                    stagger: 0.05, // Faster stagger
                    ease: 'power2.out',
                    clearProps: 'transform' // Only clear transform so opacity/visibility stays
                }
            );
        }

        // FILTER LOGIC
        function filterProducts(cat, btn) {
            // Update active chip
            if (btn) {
                document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
            }
            renderProducts(cat, document.getElementById('searchInput').value);
        }

        function searchProducts() {
            const term = document.getElementById('searchInput').value;
            // If searching, we reset the active chip to 'all' for broader results
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            document.querySelector('.chip[onclick*="all"]').classList.add('active');
            renderProducts('all', term);
        }

        // SHARE LOGIC
        async function shareProduct() {
            const title = document.getElementById('modalTitle').innerText;
            const text = `Mira esta textura increíble: ${title} en El Melaminas`;
            const url = window.location.href;

            if (navigator.share) {
                try {
                    await navigator.share({
                        title: title,
                        text: text,
                        url: url
                    });
                } catch (err) {
                    console.log('Error compartiendo:', err);
                }
            } else {
                // Fallback: Copy to clipboard
                try {
                    await navigator.clipboard.writeText(url);
                    alert('¡Enlace de El Melaminas copiado al portapapeles!');
                } catch (err) {
                    alert('¡Sigue a El Melaminas! (Simulado: ' + url + ')');
                }
            }
        }

        // FAQ TOGGLE
        function toggleFaq(el) {
            const content = el.nextElementSibling;
            content.classList.toggle('open');
            const icon = el.querySelector('span');
            icon.innerText = content.classList.contains('open') ? 'expand_less' : 'expand_more';
        }

        // MODAL LOGIC
        function openModal(p) {
            const modal = document.getElementById('productModal');
            document.getElementById('modalTitle').innerText = p.name;

            // Set image texture/color
            const imgContainer = document.getElementById('modalImg');

            // Remove previous real image if exists
            const oldImg = imgContainer.querySelector('.modal-real-img');
            if (oldImg) oldImg.remove();

            // Add real image
            const realImg = document.createElement('img');
            realImg.src = `fotos/${p.image}`;
            realImg.className = 'modal-real-img';
            realImg.style.cssText = 'position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover; opacity:0; transition: opacity 0.5s; z-index:1;';
            realImg.onload = () => {
                realImg.style.opacity = '1';
                realImg.classList.add('loaded');
            };
            realImg.onerror = () => realImg.style.display = 'none';
            imgContainer.appendChild(realImg);

            let bgStyle = `background: ${p.color}`;
            imgContainer.setAttribute('style', bgStyle);
            // Re-apply class for texture patterns
            imgContainer.className = `sheet-img ${p.style}`;

            // Actualizar especificaciones técnicas
            const specBoxes = document.querySelectorAll('.spec-box');
            specBoxes[0].querySelector('.spec-val').innerText = p.format || "1.22 x 2.44 m";
            specBoxes[1].querySelector('.spec-val').innerText = p.thickness || "15 mm";

            // Insertar o actualizar caras y seguridad si no existen
            let specGrid = document.querySelector('.spec-grid');
            let extraSpecs = document.getElementById('extraSpecs');
            if (!extraSpecs) {
                extraSpecs = document.createElement('div');
                extraSpecs.id = 'extraSpecs';
                extraSpecs.className = 'spec-grid';
                extraSpecs.style.marginTop = '15px';
                specGrid.parentNode.insertBefore(extraSpecs, specGrid.nextSibling);
            }

            extraSpecs.innerHTML = `
                <div class="spec-box">
                    <div class="spec-label"><i class="ph-bold ph-stack"></i> Número de Caras</div>
                    <div class="spec-val">${p.faces || "2 caras"}</div>
                </div>
                <div class="spec-box">
                    <div class="spec-label"><i class="ph-bold ph-leaf"></i> Seguridad</div>
                    <div class="spec-val" style="font-size: 0.7rem;">${p.safety || "Grado E1 / Ecológico"}</div>
                </div>
            `;

            // Config WhatsApp with better details
            const isLiked = favorites.includes(p.id) ? 'liked' : '';
            const likeBtn = modal.querySelector('.like-btn');
            likeBtn.dataset.productId = p.id;
            if (isLiked) likeBtn.classList.add('liked');
            else likeBtn.classList.remove('liked');

            const waMsg = `Hola El Melaminas, me interesa recibir una cotización de: *${p.name}* (Categoría: ${p.category}). ¿Tienen disponibilidad inmediata?`;
            const url = `https://wa.me/525551597562?text=${encodeURIComponent(waMsg)}`;
            document.getElementById('modalWhatsapp').href = url;

            modal.style.display = 'flex';
            // Small delay for animation
            setTimeout(() => modal.classList.add('open'), 10);
        }

        function closeModal() {
            const modal = document.getElementById('productModal');
            modal.classList.remove('open');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300); // Wait for transition
        }

        // BLOG MODAL LOGIC
        function openBlogModal(index) {
            const article = blogArticles[index];
            const modal = document.getElementById('blogModal');
            document.getElementById('blogTitle').innerText = article.title;
            document.getElementById('blogDate').innerText = article.date;
            document.getElementById('blogBody').innerHTML = article.body;

            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('open'), 10);
        }

        function closeBlogModal() {
            const modal = document.getElementById('blogModal');
            modal.classList.remove('open');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        }

        // THEME
        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.getAttribute('data-theme') === 'dark';
            html.setAttribute('data-theme', isDark ? 'light' : 'dark');
            document.getElementById('themeIcon').classList.toggle('ph-sun');
            document.getElementById('themeIcon').classList.toggle('ph-moon');
        }


        // PARALLAX EFFECT (Now handled via GSAP ScrollTrigger for better performance)
        function initParallax() {
            gsap.to('#heroBg', {
                scrollTrigger: {
                    trigger: '.hero-card',
                    start: 'top top',
                    end: 'bottom top',
                    scrub: 1 // Higher value = smoother, more fluid movement
                },
                y: '30%', // Slightly more movement for depth
                ease: 'none'
            });
        }

        // INIT
        document.getElementById('year').innerText = new Date().getFullYear();

        // Back to Top Logic
        window.addEventListener('scroll', () => {
            const btn = document.querySelector('.back-to-top');
            if (window.scrollY > 500) btn.classList.add('visible');
            else btn.classList.remove('visible');
        });

        // FORM SUBMIT
        function submitForm(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;

            btn.innerText = 'Enviando...';
            btn.style.opacity = '0.7';

            // Simulate API call
            setTimeout(() => {
                alert('¡Mensaje enviado con éxito! Nos pondremos en contacto contigo pronto.');
                e.target.reset();
                btn.innerText = originalText;
                btn.style.opacity = '1';
            }, 1500);
        }

        // BACKGROUND ANIMATION ENGINE
        class BackgroundEngine {
            constructor() {
                this.canvas = document.getElementById('bg-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.particles = [];
                this.count = 45;
                this.resize();
                window.addEventListener('resize', () => this.resize());
                this.init();
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }

            init() {
                const colors = ['#6f5b48', '#eaddcf', '#8a5a44', '#a67c52', '#dcdcdc'];
                for (let i = 0; i < this.count; i++) {
                    this.particles.push({
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        size: Math.random() * 80 + 40,
                        angle: Math.random() * Math.PI * 2,
                        rotation: Math.random() * 0.01 - 0.005,
                        speedX: Math.random() * 0.4 - 0.2,
                        speedY: Math.random() * 0.4 - 0.2,
                        color: colors[Math.floor(Math.random() * colors.length)],
                        opacity: Math.random() * 0.08 + 0.05
                    });
                }
                this.animate();
            }

            draw() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.particles.forEach(p => {
                    this.ctx.save();
                    this.ctx.translate(p.x, p.y);
                    this.ctx.rotate(p.angle);
                    this.ctx.globalAlpha = p.opacity;
                    this.ctx.fillStyle = p.color;

                    // Specific square shape (melamine tile)
                    this.ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);

                    // Optional: subtle border to look like a tile
                    this.ctx.strokeStyle = p.color;
                    this.ctx.lineWidth = 1;
                    this.ctx.strokeRect(-p.size / 2, -p.size / 2, p.size, p.size);

                    this.ctx.restore();

                    // Update position
                    p.x += p.speedX;
                    p.y += p.speedY;
                    p.angle += p.rotation;

                    // Bound checks
                    if (p.x < -p.size) p.x = this.canvas.width + p.size;
                    if (p.x > this.canvas.width + p.size) p.x = -p.size;
                    if (p.y < -p.size) p.y = this.canvas.height + p.size;
                    if (p.y > this.canvas.height + p.size) p.y = -p.size;
                });
            }

            animate() {
                this.draw();
                requestAnimationFrame(() => this.animate());
            }
        }

        renderProducts();

        // Initialize Engine
        const bgEngine = new BackgroundEngine();

        // Init GSAP after load to ensure layout positions are correct
        window.addEventListener('load', () => {
            initGSAP();
            initParallax();
            ScrollTrigger.refresh();
        });

    </script>
</body>

</html>